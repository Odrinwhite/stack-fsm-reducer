import { expect } from 'chai';
import { createStackReducer, path, head, push, pop, match, splitHead, splitLastTwo } from './stack-reducer';
describe('stack-reducer', () => {
    describe('head', () => {
        it('should return last state', () => {
            const headResult = head([{ stateId: 'one' }, { stateId: 'two' }]);
            expect(headResult).to.deep.equal({ stateId: 'two' });
        });
        it('should return handle empty array', () => {
            const headResult = head([]);
            expect(headResult).to.equal(undefined);
        });
    });
    describe('splitHead', () => {
        it('should split array into body and head', () => {
            const [tail, head] = splitHead([{ stateId: 'one' }, { stateId: 'two' }, { stateId: 'three' }, { stateId: 'four' }, { stateId: 'five' }]);
            expect(tail).to.deep.equal([{ stateId: 'one' }, { stateId: 'two' }, { stateId: 'three' }, { stateId: 'four' }]);
            expect(head).to.deep.equal({ stateId: 'five' });
        });
        it('should split single element array', () => {
            const [tail, head] = splitHead([{ stateId: 'one' }]);
            expect(tail).to.deep.equal([]);
            expect(head).to.deep.equal({ stateId: 'one' });
        });
        it('should split empty array', () => {
            const [tail, head] = splitHead([]);
            expect(tail).to.deep.equal([]);
            expect(head).to.deep.equal(undefined);
        });
    });
    describe('splitLastTwo', () => {
        it('should split last two elements', () => {
            const [tail, neck, head] = splitLastTwo([{ stateId: 'one' }, { stateId: 'two' }, { stateId: 'three' }, { stateId: 'four' }, { stateId: 'five' }]);
            expect(tail).to.deep.equal([{ stateId: 'one' }, { stateId: 'two' }, { stateId: 'three' }]);
            expect(neck).to.deep.equal({ stateId: 'four' });
            expect(head).to.deep.equal({ stateId: 'five' });
        });
        it('should split two element array', () => {
            const [tail, neck, head] = splitLastTwo([{ stateId: 'one' }, { stateId: 'two' }]);
            expect(tail).to.deep.equal([]);
            expect(neck).to.deep.equal({ stateId: 'one' });
            expect(head).to.deep.equal({ stateId: 'two' });
        });
        it('should split single element array', () => {
            const [tail, neck, head] = splitLastTwo([{ stateId: 'one' }]);
            expect(tail).to.deep.equal([]);
            expect(neck).to.deep.equal(undefined);
            expect(head).to.deep.equal({ stateId: 'one' });
        });
        it('should split empty array', () => {
            const [tail, neck, head] = splitLastTwo([]);
            expect(tail).to.deep.equal([]);
            expect(neck).to.equal(undefined);
            expect(head).to.equal(undefined);
        });
    });
    describe('getStackPath', () => {
        it('should return path of joined stateId separated by /', () => {
            const pathResult = path([{ stateId: 'state1' }, { stateId: 'state2' }, { stateId: 'state3' }]);
            expect(pathResult).to.equal('state1/state2/state3');
        });
        it('should return empty string on empty array', () => {
            const pathResult = path([]);
            expect(pathResult).to.equal('');
        });
    });
    describe('push', () => {
        it('should push element to the stack', () => {
            const stack = push([{ stateId: 'state1' }], { stateId: 'state2' }, { stateId: 'state3' });
            expect(path(stack)).to.equal('state1/state2/state3');
        });
    });
    describe('pop', () => {
        it('should pop element from the stack', () => {
            const stack = pop([{ stateId: 'state1' }, { stateId: 'state2' }, { stateId: 'state3' }]);
            expect(path(stack)).to.equal('state1/state2');
        });
    });
    describe('match', () => {
        it('should match simple path', () => {
            const result = match('stateId1/stateId2', 'stateId1/stateId2');
            expect(result).to.equal(true);
        });
        it('should match glob path', () => {
            const result = match('stateId1/stateId2', '**/stateId2');
            expect(result).to.equal(true);
        });
    });
    describe('createStackReducer', () => {
        it('should run trough map of reducers', () => {
            const initReducer = (stack) => push(stack, { stateId: 'setup' });
            const setupReducer = (stack) => {
                const setupState = head(stack);
                if (setupState && setupState.playerName === undefined) {
                    const queryState = {
                        stateId: 'query',
                        query: 'Please enter your name',
                        writeTo: 'playerName'
                    };
                    return push(stack, queryState);
                }
                else if (setupState && setupState.classId === undefined) {
                    const queryOptionState = {
                        stateId: 'queryOption',
                        query: 'Please select your class',
                        options: ['mage', 'druid'],
                        writeTo: 'classId'
                    };
                    return push(stack, queryOptionState);
                }
                else {
                    return stack;
                }
            };
            const queryReducer = (stack, action) => {
                const { type, response } = action;
                if (type === 'QUERY_RESPONSE') {
                    const [tail, neck, head] = splitLastTwo(stack);
                    const queryState = head;
                    const prevState = Object.assign({}, neck, { [queryState.writeTo]: response });
                    return [...tail, prevState];
                }
                return stack;
            };
            const queryOptionReducer = (stack, action) => {
                const { type, optionId } = action;
                if (type === 'QUERY_OPTION_RESPONSE') {
                    const [tail, neck, head] = splitLastTwo(stack);
                    const queryOptionState = head;
                    const prevState = Object.assign({}, neck, { [queryOptionState.writeTo]: queryOptionState.options[optionId] });
                    return [...tail, prevState];
                }
                return stack;
            };
            const stackReducer = createStackReducer({
                '': initReducer,
                'setup': setupReducer,
                '**/query': queryReducer,
                '**/queryOption': queryOptionReducer
            });
            const NON_EXISTING_ACTION = { type: 'NOT_EXISTING_ACTION' };
            const QUERY_RESPONSE = { type: 'QUERY_RESPONSE', response: 'John Smith' };
            const QUERY_OPTION_RESPONSE = { type: 'QUERY_OPTION_RESPONSE', optionId: 1 };
            let state = stackReducer([], NON_EXISTING_ACTION);
            expect(path(state)).to.equal('setup/query');
            expect(head(state).query).to.equal('Please enter your name');
            expect(head(state).writeTo).to.equal('playerName');
            state = stackReducer(state, NON_EXISTING_ACTION);
            expect(path(state)).to.equal('setup/query');
            expect(head(state).query).to.equal('Please enter your name');
            expect(head(state).writeTo).to.equal('playerName');
            state = stackReducer(state, QUERY_RESPONSE);
            expect(path(state)).to.equal('setup/queryOption');
            expect(head(state).query).to.equal('Please select your class');
            expect(head(state).options).to.deep.equal(['mage', 'druid']);
            expect(head(state).writeTo).to.equal('classId');
            state = stackReducer(state, QUERY_OPTION_RESPONSE);
            expect(path(state)).to.equal('setup');
            expect(head(state).playerName).to.equal('John Smith');
            expect(head(state).classId).to.equal('druid');
            state = stackReducer(state, NON_EXISTING_ACTION);
            expect(path(state)).to.equal('setup');
            expect(head(state).playerName).to.equal('John Smith');
            expect(head(state).classId).to.equal('druid');
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhY2stcmVkdWNlci5zcGVjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3N0YWNrLXJlZHVjZXIuc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sTUFBTSxDQUFBO0FBQzdCLE9BQU8sRUFDTCxrQkFBa0IsRUFDbEIsSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLEVBQ0osR0FBRyxFQUNILEtBQUssRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNiLE1BQU0saUJBQWlCLENBQUE7QUFFeEIsUUFBUSxDQUFDLGVBQWUsRUFBRTtJQUV4QixRQUFRLENBQUMsTUFBTSxFQUFFO1FBQ2YsRUFBRSxDQUFDLDBCQUEwQixFQUFFO1lBQzdCLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUMsQ0FBQTtZQUM3RCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQTtRQUNwRCxDQUFDLENBQUMsQ0FBQTtRQUVGLEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRTtZQUNyQyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUE7WUFDM0IsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUE7UUFDeEMsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtJQUVGLFFBQVEsQ0FBQyxXQUFXLEVBQUU7UUFDcEIsRUFBRSxDQUFDLHVDQUF1QyxFQUFFO1lBQzFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxPQUFPLEVBQUUsT0FBTyxFQUFDLEVBQUUsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFDLEVBQUUsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQyxDQUFBO1lBQzlILE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLE9BQU8sRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLE1BQU0sRUFBQyxDQUFDLENBQUMsQ0FBQTtZQUN2RyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQTtRQUMvQyxDQUFDLENBQUMsQ0FBQTtRQUVGLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRTtZQUN0QyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUMsQ0FBQTtZQUNsRCxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUE7WUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUE7UUFDOUMsQ0FBQyxDQUFDLENBQUE7UUFFRixFQUFFLENBQUMsMEJBQTBCLEVBQUU7WUFDN0IsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUE7WUFDbEMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUN2QyxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLGNBQWMsRUFBRTtRQUN2QixFQUFFLENBQUMsZ0NBQWdDLEVBQUU7WUFDbkMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFDLEVBQUUsRUFBQyxPQUFPLEVBQUUsT0FBTyxFQUFDLEVBQUUsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFDLEVBQUUsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQyxDQUFBO1lBQ3ZJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUMsQ0FBQTtZQUNwRixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQTtZQUM3QyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQTtRQUMvQyxDQUFDLENBQUMsQ0FBQTtRQUVGLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRTtZQUNuQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQyxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUMsRUFBRSxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFDLENBQUE7WUFDN0UsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFBO1lBQzVDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFBO1FBQzlDLENBQUMsQ0FBQyxDQUFBO1FBRUYsRUFBRSxDQUFDLG1DQUFtQyxFQUFFO1lBQ3RDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLFlBQVksQ0FBQyxDQUFDLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUMsQ0FBQTtZQUMzRCxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUE7WUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1lBQ3JDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFBO1FBQzlDLENBQUMsQ0FBQyxDQUFBO1FBRUYsRUFBRSxDQUFDLDBCQUEwQixFQUFFO1lBQzdCLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQTtZQUMzQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUE7WUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUE7WUFDaEMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUE7UUFDbEMsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtJQUVGLFFBQVEsQ0FBQyxjQUFjLEVBQUU7UUFDdkIsRUFBRSxDQUFDLHFEQUFxRCxFQUFFO1lBQ3hELE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUMsQ0FBQTtZQUN4RixNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFBO1FBQ3JELENBQUMsQ0FBQyxDQUFBO1FBRUYsRUFBRSxDQUFDLDJDQUEyQyxFQUFFO1lBQzlDLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQTtZQUMzQixNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUNqQyxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLE1BQU0sRUFBRTtRQUNmLEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRTtZQUVyQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQWMsQ0FBQyxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUMsQ0FBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBQyxFQUFFLEVBQUMsT0FBTyxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUE7WUFDaEcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQTtRQUN0RCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLEtBQUssRUFBRTtRQUNkLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRTtZQUN0QyxNQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQyxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUMsRUFBRSxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUMsRUFBRSxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUMsQ0FBQyxDQUFDLENBQUE7WUFDbEYsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUE7UUFDL0MsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtJQUVGLFFBQVEsQ0FBQyxPQUFPLEVBQUU7UUFDaEIsRUFBRSxDQUFDLDBCQUEwQixFQUFFO1lBQzdCLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxtQkFBbUIsRUFBRSxtQkFBbUIsQ0FBQyxDQUFBO1lBQzlELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQy9CLENBQUMsQ0FBQyxDQUFBO1FBRUYsRUFBRSxDQUFDLHdCQUF3QixFQUFFO1lBQzNCLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxtQkFBbUIsRUFBRSxhQUFhLENBQUMsQ0FBQTtZQUN4RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUMvQixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLG9CQUFvQixFQUFFO1FBQzdCLEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRTtZQW9DdEMsTUFBTSxXQUFXLEdBQWdFLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBQyxPQUFPLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQTtZQUUzSCxNQUFNLFlBQVksR0FBZ0UsQ0FBQyxLQUFLO2dCQUN0RixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUE2QyxDQUFBO2dCQUMxRSxFQUFFLENBQUMsQ0FBQyxVQUFVLElBQUksVUFBVSxDQUFDLFVBQVUsS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO29CQUN0RCxNQUFNLFVBQVUsR0FBK0I7d0JBQzdDLE9BQU8sRUFBRSxPQUFPO3dCQUNoQixLQUFLLEVBQUUsd0JBQXdCO3dCQUMvQixPQUFPLEVBQUUsWUFBWTtxQkFDdEIsQ0FBQTtvQkFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQTtnQkFDaEMsQ0FBQztnQkFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxJQUFJLFVBQVUsQ0FBQyxPQUFPLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztvQkFDMUQsTUFBTSxnQkFBZ0IsR0FBNEM7d0JBQ2hFLE9BQU8sRUFBRSxhQUFhO3dCQUN0QixLQUFLLEVBQUUsMEJBQTBCO3dCQUNqQyxPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDO3dCQUMxQixPQUFPLEVBQUUsU0FBUztxQkFDbkIsQ0FBQTtvQkFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxnQkFBZ0IsQ0FBQyxDQUFBO2dCQUN0QyxDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNOLE1BQU0sQ0FBQyxLQUFLLENBQUE7Z0JBQ2QsQ0FBQztZQUNILENBQUMsQ0FBQTtZQUVELE1BQU0sWUFBWSxHQUFnRSxDQUFDLEtBQUssRUFBRSxNQUFNO2dCQUM5RixNQUFNLEVBQUMsSUFBSSxFQUFFLFFBQVEsRUFBQyxHQUFHLE1BQTZCLENBQUE7Z0JBQ3RELEVBQUUsQ0FBQyxDQUFDLElBQUksS0FBSyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7b0JBQzlCLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQTtvQkFDOUMsTUFBTSxVQUFVLEdBQUcsSUFBeUMsQ0FBQTtvQkFDNUQsTUFBTSxTQUFTLHFCQUFRLElBQVksSUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsRUFBRSxRQUFRLEdBQUMsQ0FBQTtvQkFDcEUsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUE7Z0JBQzdCLENBQUM7Z0JBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQTtZQUNkLENBQUMsQ0FBQTtZQUVELE1BQU0sa0JBQWtCLEdBQWdFLENBQUMsS0FBSyxFQUFFLE1BQU07Z0JBQ3BHLE1BQU0sRUFBQyxJQUFJLEVBQUUsUUFBUSxFQUFDLEdBQUcsTUFBbUMsQ0FBQTtnQkFDNUQsRUFBRSxDQUFDLENBQUMsSUFBSSxLQUFLLHVCQUF1QixDQUFDLENBQUMsQ0FBQztvQkFDckMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFBO29CQUM5QyxNQUFNLGdCQUFnQixHQUFHLElBQStDLENBQUE7b0JBQ3hFLE1BQU0sU0FBUyxxQkFBUSxJQUFZLElBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUMsQ0FBQTtvQkFDcEcsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUE7Z0JBQzdCLENBQUM7Z0JBQ0QsTUFBTSxDQUFDLEtBQUssQ0FBQTtZQUNkLENBQUMsQ0FBQTtZQUVELE1BQU0sWUFBWSxHQUFHLGtCQUFrQixDQUFDO2dCQUN0QyxFQUFFLEVBQUUsV0FBVztnQkFDZixPQUFPLEVBQUUsWUFBWTtnQkFDckIsVUFBVSxFQUFFLFlBQVk7Z0JBQ3hCLGdCQUFnQixFQUFFLGtCQUFrQjthQUNyQyxDQUFDLENBQUE7WUFFRixNQUFNLG1CQUFtQixHQUFHLEVBQUMsSUFBSSxFQUFFLHFCQUFxQixFQUFDLENBQUE7WUFDekQsTUFBTSxjQUFjLEdBQUcsRUFBQyxJQUFJLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBQyxDQUFBO1lBQ3ZFLE1BQU0scUJBQXFCLEdBQUcsRUFBQyxJQUFJLEVBQUUsdUJBQXVCLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBQyxDQUFBO1lBRTFFLElBQUksS0FBSyxHQUFHLFlBQVksQ0FBQyxFQUFFLEVBQUUsbUJBQW1CLENBQUMsQ0FBQTtZQUVqRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQTtZQUMzQyxNQUFNLENBQUUsSUFBSSxDQUFDLEtBQUssQ0FBZ0MsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUE7WUFDNUYsTUFBTSxDQUFFLElBQUksQ0FBQyxLQUFLLENBQWdDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQTtZQUVsRixLQUFLLEdBQUcsWUFBWSxDQUFDLEtBQUssRUFBRSxtQkFBbUIsQ0FBQyxDQUFBO1lBRWhELE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFBO1lBQzNDLE1BQU0sQ0FBRSxJQUFJLENBQUMsS0FBSyxDQUFnQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQTtZQUM1RixNQUFNLENBQUUsSUFBSSxDQUFDLEtBQUssQ0FBZ0MsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFBO1lBRWxGLEtBQUssR0FBRyxZQUFZLENBQUMsS0FBSyxFQUFFLGNBQWMsQ0FBQyxDQUFBO1lBRTNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUE7WUFDakQsTUFBTSxDQUFFLElBQUksQ0FBQyxLQUFLLENBQXNDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFBO1lBQ3BHLE1BQU0sQ0FBRSxJQUFJLENBQUMsS0FBSyxDQUFzQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUE7WUFDbEcsTUFBTSxDQUFFLElBQUksQ0FBQyxLQUFLLENBQXNDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUVyRixLQUFLLEdBQUcsWUFBWSxDQUFDLEtBQUssRUFBRSxxQkFBcUIsQ0FBQyxDQUFBO1lBRWxELE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQ3JDLE1BQU0sQ0FBRSxJQUFJLENBQUMsS0FBSyxDQUFnQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUE7WUFDckYsTUFBTSxDQUFFLElBQUksQ0FBQyxLQUFLLENBQWdDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUU3RSxLQUFLLEdBQUcsWUFBWSxDQUFDLEtBQUssRUFBRSxtQkFBbUIsQ0FBQyxDQUFBO1lBRWhELE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQ3JDLE1BQU0sQ0FBRSxJQUFJLENBQUMsS0FBSyxDQUFnQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUE7WUFDckYsTUFBTSxDQUFFLElBQUksQ0FBQyxLQUFLLENBQWdDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUMvRSxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBRUosQ0FBQyxDQUFDLENBQUEifQ==